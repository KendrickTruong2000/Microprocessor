
as12, an absolute assembler for Motorola MCU's, version 1.2h

                        ;Midterm Assignment
                        ;--- Define Equation Section ---
0001                    DRB     EQU     $0001
0003                    DDRB    EQU     $0003
0258                    DRP     EQU     $0258
025a                    DDRP    EQU     $025A
0268                    DRJ     EQU     $0268
026a                    DDRJ    EQU     $026A
ee88                    PRINTF  EQU     $EE88
ee84                    GETCHAR EQU     $EE84
ee86                    PUTCHAR EQU     $EE86
                        
                        ;--- Main Program
1000                            ORG     $1000
1000 86 ff                      LDAA    #$FF
1002 5a 03                      STAA    DDRB
1004 7a 02 5a                   STAA    DDRP    ;Set PORT B, P to output.
1007 7a 02 6a                   STAA    DDRJ
100a 86 00                      LDAA    #$00
100c 7a 02 58                   STAA    DRP     ;Turn ALL 7-segment off
                        
                        ;START   LDD     PROMPT
                        ;        LDX     PRINTF
                        ;        JSR     $00,X
                        ;        LDX     GETCHAR
                        ;        JSR     $00,X
                        ;        STAB    TARGET
                        ;        CMPB    #$74
                        ;        BEQ     FINISH
                        ;        CMPB    #$75
                        ;        BEQ     WRONG
                        ;        CMPB    #$64
                        ;        BEQ     MATCH
                        ;        BRA     START
100f cc 11 18           START	LDD     #PROMPT
1012 fe ee 88                   LDX     PRINTF
1015 15 00                      JSR     $00,X
1017 cd 11 77                   LDY     #BUFFER
                                
101a                    READ_LOOP
101a fe ee 84                   LDX     GETCHAR
101d 15 00                      JSR     $00,X
101f 7b 11 17                   STAB    TARGET
1022 c1 6b                      CMPB    #$6B
1024 27 00                      BEQ     CHECKE
1026 c1 65              CHECKE	CMPB    #$65
1028 27 00                      BEQ     CHECKY
102a c1 79              CHECKY	CMPB    #$79
102c 27 00                      BEQ     CHECKESC
102e                    CHECKESC
102e c1 1b                      CMPB    #$1B
1030 27 02                      BEQ     MATCH
1032 20 e6                      BRA 	READ_LOOP
                        
                        ;--- Compare Subroutine
                        ;COMPARE LDAA    0,X
                        ;        LDAB    0,Y
                        ;        CMPA    #0
                        ;        BEQ     MATCH
                        ;        CBA
                        ;        BNE     WRONG
                        ;        INX
                        ;        INY
                        ;        BRA     COMPARE
                        
                        ;--- MATCH Subroutine
1034 cc 11 2f           MATCH   LDD     #SUCCESS
1037 fe ee 88                   LDX     PRINTF
103a 15 00                      JSR     0,X
103c 16 10 6f                   JSR     WAIT6
103f b7 20                      TPA
1041 84 af                      ANDA    #%10101111
1043 b7 02                      TAP
1045 86 40                      LDAA    #$40
1047 5a 1e                      STAA    $001E
1049 cf 20 00                   LDS     #$2000
104c cc 10 5e                   LDD     #IRQISR ;Call maskable interrupt
104f 7c 3e 72                   STD     $3E72
1052 20 fe              HERE    BRA     HERE
1054 3d                         RTS
                                
                        ;--- WRONG Subroutine
1055 cc 11 5e           WRONG   LDD     #FAIL
1058 fe ee 88                   LDX     PRINTF
105b 15 00                      JSR     0,X
105d 3d                         RTS
                        
                        ;--- IRQISR Subroutine
105e 86 ff              IRQISR  LDAA    #$FF
1060 5a 03                      STAA    DDRB
1062 7a 02 5a                   STAA    DDRP
1065 7a 02 6a                   STAA    DDRJ
1068 7a 02 58                   STAA    DRP
106b 16 10 e8                   JSR     BLINK
106e 0b                         RTI
                        
                        ;--- WAIT 6 Second
106f 86 fe              WAIT6   LDAA    #$FE
1071 7a 02 58                   STAA    DRP
1074 ce 11 0d                   LDX     #NUMS
1077 a6 00                      LDAA    $00,X
1079 5a 01                      STAA    DRB
107b 16 10 fc                   JSR     FREQ2
107e 16 10 fc                   JSR     FREQ2
1081 16 10 fc                   JSR     FREQ2
1084 16 10 fc                   JSR     FREQ2
1087 a6 01                      LDAA    $01,X
1089 5a 01                      STAA    DRB
108b 16 10 fc                   JSR     FREQ2
108e 16 10 fc                   JSR     FREQ2
1091 16 10 fc                   JSR     FREQ2
1094 16 10 fc                   JSR     FREQ2
1097 a6 02                      LDAA    $02,X
1099 5a 01                      STAA    DRB
109b 16 10 fc                   JSR     FREQ2
109e 16 10 fc                   JSR     FREQ2
10a1 16 10 fc                   JSR     FREQ2
10a4 16 10 fc                   JSR     FREQ2
10a7 a6 03                      LDAA    $03,X
10a9 5a 01                      STAA    DRB
10ab 16 10 fc                   JSR     FREQ2
10ae 16 10 fc                   JSR     FREQ2
10b1 16 10 fc                   JSR     FREQ2
10b4 16 10 fc                   JSR     FREQ2
10b7 a6 04                      LDAA    $04,X
10b9 5a 01                      STAA    DRB
10bb 16 10 fc                   JSR     FREQ2
10be 16 10 fc                   JSR     FREQ2
10c1 16 10 fc                   JSR     FREQ2
10c4 16 10 fc                   JSR     FREQ2
10c7 a6 05                      LDAA    $05,X
10c9 5a 01                      STAA    DRB
10cb 16 10 fc                   JSR     FREQ2
10ce 16 10 fc                   JSR     FREQ2
10d1 16 10 fc                   JSR     FREQ2
10d4 16 10 fc                   JSR     FREQ2
10d7 a6 06                      LDAA    $06,X
10d9 5a 01                      STAA    DRB
10db 16 10 fc                   JSR     FREQ2
10de 16 10 fc                   JSR     FREQ2
10e1 16 10 fc                   JSR     FREQ2
10e4 16 10 fc                   JSR     FREQ2
10e7 3d                         RTS
                        
                        ;--- Blink LEDs 10 times
10e8 86 0a              BLINK   LDAA    #10
10ea                    BLINK_LOOP
10ea c6 ff                      LDAB    #%11111111
10ec 5b 01                      STAB    DRB
10ee 16 10 fc                   JSR     FREQ2
10f1 c6 00                      LDAB    #%00000000
10f3 5b 01                      STAB    DRB
10f5 16 10 fc                   JSR     FREQ2
10f8 43                         DECA
10f9 26 ef                      BNE     BLINK_LOOP
10fb 3d                         RTS
                                
                        ;--- Frequency 2Hz
10fc 36                 FREQ2   PSHA
10fd 35                         PSHY
10fe 86 fa                      LDAA    #250
1100                    DELAY_LOOP
1100 cd 17 70                   LDY     #6000
1103                    FREQ_DELAY
1103 03                         DEY
1104 26 fd                      BNE     FREQ_DELAY
1106 43                         DECA
1107 26 f7                      BNE     DELAY_LOOP
1109 31                         PULY
110a 32                         PULA
110b 3d                         RTS
                                
110c 3f                 FINISH  SWI
                                
                        ;--- DATA
110d 3f 06 5b 4f 66 6d  NUMS    FCB     $3F,$06,$5B,$4F,$66,$6D,$7D,$07,$7F,$6F
     7d 07 7f 6f
1117                    TARGET  RMB     1
1118 45 6e 74 65 72 20  PROMPT  FCC     "Enter Password: "
     50 61 73 73 77 6f
     72 64 3a 20
1128 0d 0a 00                   FCB     $0D,$0A,$00
112b 6b 65 79           PASS    FCC     "key",$0
112e 00                         FCB     0
112f 50 72 6f 63 65 73  SUCCESS FCC     "Processing, the IRQ will be enabled in 6 sec"
     73 69 6e 67 2c 20
     74 68 65 20 49 52
     51 20 77 69 6c 6c
     20 62 65 20 65 6e
     61 62 6c 65 64 20
     69 6e 20 36 20 73
     65 63
115b 0d 0a 00                   FCB     $0D,$0A,$00
115e 59 4f 55 52 20 41  FAIL    FCC     "YOUR ACCOUNT IS LOCKED"
     43 43 4f 55 4e 54
     20 49 53 20 4c 4f
     43 4b 45 44
1174 0d 0a 00                   FCB     $0D,$0A,$00
1177                    BUFFER  RMB     21
                        
                                END
                                

Executed: Fri Oct 10 09:46:43 2025
Total cycles: 441, Total bytes: 374
Total errors: 0, Total warnings: 0
